(function(t){function e(e){for(var a,r,s=e[0],u=e[1],l=e[2],d=0,m=[];d<s.length;d++)r=s[d],o[r]&&m.push(o[r][0]),o[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);c&&c(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},o={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/ui/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var c=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"3a97":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-container"},[n("router-view")],1)},i=[],r=n("2f62"),s={computed:Object(r["b"])(["user"]),mounted:function(){this.$store.dispatch("SET_CURRENT_USER")}},u=s,l=n("2877"),c=Object(l["a"])(u,o,i,!1,null,null,null),d=c.exports,m=(n("7f7f"),n("8c4f")),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("md-app",[n("md-app-toolbar",{staticClass:"md-primary"},[n("md-avatar",[n("router-link",{attrs:{to:"/"}})],1),n("h3",{staticClass:"md-title",staticStyle:{flex:"1"}},[t._v(t._s(t.title))]),n("md-menu",{attrs:{"md-direction":"bottom-start"}},[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[t._v("account_circle")])],1),n("md-menu-content",[n("md-menu-item",[n("md-avatar",{staticClass:"md-avatar-icon"},[n("md-icon",[t._v("home")])],1),n("span",[t._v(t._s(t.user.name))])],1),n("md-menu-item",[n("md-button",{staticClass:"md-primary",on:{click:t.logout}},[t._v("Logout")])],1)],1)],1)],1),n("md-app-drawer",{attrs:{"md-permanent":"full"}},[n("md-toolbar",{staticClass:"md-transparent",attrs:{"md-elevation":"0"}},[t._v("\n        Navigation\n      ")]),n("md-list",[n("md-list-item",[n("md-icon",[t._v("move_to_inbox")]),n("span",{staticClass:"md-list-item-text"},[t._v("Inbox")])],1),n("md-list-item",[n("md-icon",[t._v("send")]),n("span",{staticClass:"md-list-item-text"},[t._v("Sent Mail")])],1)],1)],1),n("md-app-content",[n("p",[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit.")])])],1)],1)},f=[],h={computed:Object(r["b"])(["title","user"]),mounted:function(){this.$store.dispatch("SET_CURRENT_USER")},methods:{logout:function(){this.$store.dispatch("LOGOUT")}}},v=h,g=(n("e51e"),Object(l["a"])(v,p,f,!1,null,"b6ca49ba",null)),b=g.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"md-layout md-gutter md-alignment-center-center",staticStyle:{"min-height":"60vh"}},[n("div",{staticClass:"md-layout-item  md-alignment-center-center"},[n("div",{staticClass:"md-layout-item md-layout md-gutter",staticStyle:{"margin-bottom":"20px"}},[n("div",{staticClass:"md-layout-item"}),n("div",{staticClass:"md-layout-item md-alignment-center-center md-size-20"},[n("span",[n("md-avatar",[t._v("\n              logo\n            ")])],1),n("span",{staticClass:"md-title"},[t._v("Spring Boot Vue Oauth")])]),n("div",{staticClass:"md-layout-item"})]),n("div",{staticClass:"md-layout-item md-layout md-gutter"},[n("div",{staticClass:"md-layout-item"}),n("div",{staticClass:"md-layout-item md-size-20"},[n("md-button",{staticClass:"md-raised md-primary",on:{click:t.authenticate}},[t._v("Войти")])],1),n("div",{staticClass:"md-layout-item"})])])])])},y=[],S={methods:{authenticate:function(){this.$store.dispatch("LOGIN")}}},E=S,T=Object(l["a"])(E,_,y,!1,null,null,null),C=T.exports,O=n("5f35"),U=n.n(O),w=n("795b"),x=n.n(w),R=n("ba38"),k=n("a7fe"),j=n.n(k),L=n("bc3a"),$=n.n(L),N=!0,I={apiUrl:"/api",redirectUrl:N?"/ui/token":"http://localhost:3000/token"};$.a.defaults.baseURL=I.apiUrl,$.a.defaults.transformResponse=function(t){return t?JSON.parse(t):t},$.a.interceptors.response.use(function(t){return t},function(t){return"Network Error"===t.message&&D.go("/login"),x.a.reject(t)}),a["default"].use(j.a,$.a);var M=R["a"].factory(a["default"].prototype.$http,{baseUrl:I.apiUrl,storageType:"cookieStorage",providers:{oauth2:{name:"spring-vue-oauth",state:"qwerty",clientId:"webui",redirectUri:I.redirectUrl,authorizationEndpoint:"/oauth/authorize",responseType:"token",popupOptions:{width:500,height:560}}}}),P=M,z=(n("a481"),{logout:function(){return a["default"].axios.post("/logout",null,{withCredentials:!0,baseURL:"/",transformResponse:null})}}),G=n("04e1"),A=n.n(G),J={LOGIN:function(){P.authenticate("oauth2").then(function(){D.replace("/")})},LOGOUT:function(t){var e=t.commit;z.logout().then(function(){P.logout().then(function(){e("SET_USER",null),D.push("/login")})}).catch(function(){P.logout().then(function(){e("SET_USER",null),D.push("/login")})})},SET_CURRENT_USER:function(t){var e=t.commit,n=P.getToken();if(n){var a=A()(n);e("SET_USER",a.user_name)}}},q={SET_USER:function(t,e){t.user.name=e},SET_TITLE:function(t,e){t.title=e}};a["default"].use(r["a"]);var B=new r["a"].Store({strict:!0,state:{title:null,user:{name:null}},getters:{isAuthenticated:function(){return P.isAuthenticated()},accessToken:function(){return P.getToken()}},actions:J,mutations:q});a["default"].use(m["a"]);var V=new m["a"]({mode:"history",base:U.a.baseUrl,routes:[{path:"/",component:b,meta:{title:"Main page"}},{path:"/login",name:"login",component:C,meta:{title:"Login"}}]});V.beforeEach(function(t,e,n){var a=t.meta.title;document.title=a,B.commit("SET_TITLE",a);var o=P.isAuthenticated();"login"===t.name&&o?n("/"):"/login"===t.path||"/token"===t.path||o?n():n("/login")});var D=V,F=n("43f9"),H=n.n(F);n("51de");a["default"].use(H.a),a["default"].config.productionTip=!1,new a["default"]({router:D,store:B,render:function(t){return t(d)}}).$mount("#app")},"5f35":function(t,e,n){t.exports={baseUrl:"/ui/",devServer:{proxy:{"/api":{target:"http://localhost:8080",changeOrigin:!0},"/logout":{target:"http://localhost:8080",changeOrigin:!0},"/oauth/authorize":{target:"http://localhost:8080"}}}}},e51e:function(t,e,n){"use strict";var a=n("3a97"),o=n.n(a);o.a}});
//# sourceMappingURL=app.4b957273.js.map